<?xml version="1.0" ?>
<odoo>
    <template id="course_detail" name="Course Detail" t-name="course-detail"
              page="True">
        <t t-call="website.layout">
            <div class="oe_structure oe_empty">
                <section
                        style="background-color: rgba(0,0,0,.8); padding-bottom: 14px;">
                    <div class="container">
                        <div class="row mt48">
                            <div class="col-md-9 learndash_course_info text-white">
                                <h2 class="course-derail-h2 text-white"
                                    t-esc="course.name"></h2>
                                <div class="lead__headline">
                                    <t t-raw="course.short_description"/>
                                </div>
                                <div class="col-md-12 nbt-category-name">
                                    Category:
                                    <br/>
                                    <t t-foreach="course.category_ids"
                                       t-as='cat'>
                                        <p t-esc="cat.name" class="text-white"
                                           style="display: inline-block;"/>
                                        ,
                                    </t>
                                </div>
                                <div class="col-md-3 nbt-date-price">
                                    Price:
                                    <span class="text-white"
                                          t-esc="course.type"/>
                                </div>
                                <div class="col-md-3 total-lecture">
                                    Total Duration
                                    <span class="text-white"
                                          t-esc="course.display_time"/>
                                </div>
                                <div class="col-md-3 nbt-date-lang">
                                    Language:
                                    <span class="text-white"
                                          t-esc="course.language"/>
                                </div>
                                <div class="col-md-3 learndash_course_review">
                                    Review
                                    <t t-call="rating.rating_card">
                                        <t t-set="rating_stat"
                                           t-value="rating_course"/>
                                        <t t-set="max_rate" t-value="5"/>
                                        <t t-set="min_rate" t-value="1"/>
                                    </t>
                                </div>
                                <div class="col-md-9 col-sm-9 col-xs-12"
                                     t-if="enrolled">
                                    <span class="progress-value"
                                          t-raw="completed_percentage"></span>
                                    <div id="progressBar">
                                        <div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="course-thumbnail hidden-sm">
                                    <a t-attf-href="#">
                                        <img t-if="not course.image"
                                             t-attf-src="/openeducat_lms/static/src/img/channel-default.jpg"
                                             class="img img-responsive"
                                             style="width: 100%; border: 3px solid white;"/>
                                        <img t-if="course.image"
                                             t-attf-src="/web/image/op.course/#{course.id}/image"
                                             class="img img-responsive"
                                             style="width: 100%; border: 3px solid white;"/>
                                    </a>
                                </div>
                                <div class="col-md-12 col-sm-12 col-xs-12 mt16 mb16"
                                     style="padding:0px">
                                    <a t-attf-href="/course/enroll/#{slug(course)}"
                                       t-if="not enrolled"
                                       class="btn btn-block btn-primary"
                                       style="border-radius: 0px; padding: 14px 12px;">
                                        Enroll Course
                                    </a>
                                    <a t-attf-href="/course/#{slug(course)}"
                                       t-if="completed_percentage == 0 and enrolled"
                                       class="btn btn-block btn-primary"
                                       style="border-radius: 0px; padding: 14px 12px;">
                                        Start Course
                                    </a>
                                    <a t-attf-href="/course/#{slug(course)}"
                                       t-if="completed_percentage"
                                       class="btn btn-block btn-primary"
                                       style="border-radius: 0px; padding: 14px 12px;">
                                        Continue Learning
                                    </a>
                                </div>
                                <div class="price_view">
                                    <t t-if="course.type == 'paid'">
                                        <p class="text-white text-center" t-esc="course.product_id.website_price"
                                              t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                                        <!-- <t t-esc="course.price"/> -->
                                        <!-- <span itemprop="priceCurrency" t-esc="website.currency_id.name" /> -->
                                    </t>
                                </div>
                            </div>
                        </div>

                    </div>
                </section>
                <section>
                    <div class="container">
                        <div class="row">
                            <div class="col-md-9 learndash_course_info mt32">
                                <h2 class="course-derail-h2"
                                    style="font-size: 18px;margin-bottom: 12px;">
                                    Description
                                </h2>
                                <div class="text-overflow">
                                    <p t-raw="course.full_description"/>
                                </div>
                                <a class="btn-overflow mb32"
                                   href="javascript:void(0)">Show more
                                </a>
                            </div>
                        </div>
                    </div>
                </section>
                <section>
                    <div class="container">
                        <div class="row">
                            <div class="col-md-12 learndash_course_tabs">
                                <ul class="nav nav-tabs nav-justified"
                                    style="border-bottom:0px;"
                                    role="tablist">
                                    <li role="presentation" class="active">
                                        <a href="#course-curriculum"
                                           class="course-detail-tab"
                                           aria-controls="profile"
                                           role="tab"
                                           data-toggle="tab">
                                            Curriculum
                                        </a>
                                    </li>
                                    <li role="presentation">
                                        <a href="#course-instructor"
                                           class="course-detail-tab"
                                           aria-controls="messages"
                                           role="tab"
                                           data-toggle="tab">
                                            Instructor
                                        </a>
                                    </li>
                                    <li role="presentation">
                                        <a href="#course-comments"
                                           class="course-detail-tab course-comments"
                                           aria-controls="settings"
                                           role="tab"
                                           data-toggle="tab">
                                            Comments
                                        </a>
                                    </li>

                                </ul>
                                <div class="tab-content"
                                     style="margin:5px;">
                                    <div role="tabpanel"
                                         class="tab-pane active"
                                         id="course-curriculum">
                                        <div class="panel-group"
                                             id="accordion"
                                             role="tablist"
                                             aria-multiselectable="true">
                                            <t t-foreach="sections"
                                               t-as="section">
                                                <div class="panel panel-default">
                                                    <div class="panel-heading"
                                                         role="tab"
                                                         id="headingOne">
                                                        <h4 class="panel-title">
                                                            <a role="button"
                                                               data-toggle="collapse"
                                                               data-parent="#accordion"
                                                               t-attf-href="##{section.id}"
                                                               aria-expanded="true"
                                                               aria-controls="collapseOne"
                                                               t-raw="section.name"
                                                               class="collapsed"
                                                               style="padding-left: 20px;"/>
                                                            <span class="hidden-xs hidden-sm"
                                                                  style="float: right;"
                                                                  t-raw="section.display_time"/>
                                                        </h4>
                                                    </div>
                                                    <div t-attf-id="#{section.id}"
                                                         class="panel-collapse collapse"
                                                         role="tabpanel"
                                                         aria-labelledby="headingOne">
                                                        <div class="panel-body">
                                                            <table width="100%">
                                                                <tbody>
                                                                    <t t-foreach="section.section_material_ids"
                                                                       t-as="m"
                                                                       t-if="m.material_id.website_published">
                                                                        <tr class="mt8 mb8">
                                                                            <td width="35%">
                                                                                <i t-if="m.material_id.material_type == 'audio'"
                                                                                   class="fa fa-headphones"
                                                                                   aria-hidden="true"></i>
                                                                                <i t-if="m.material_id.material_type == 'video'"
                                                                                   class="fa fa-play-circle-o "
                                                                                   aria-hidden="true"></i>
                                                                                <i t-if="m.material_id.material_type == 'document'"
                                                                                   class="fa fa-file-pdf-o"
                                                                                   aria-hidden="true"></i>
                                                                                <i t-if="m.material_id.material_type == 'infographic'"
                                                                                   class="fa fa-file-image-o"
                                                                                   aria-hidden="true"></i>
                                                                                <i t-if="m.material_id.material_type == 'quiz'"
                                                                                   class="fa fa-question-circle"
                                                                                   aria-hidden="true"></i>
                                                                                <i t-if="m.material_id.material_type == 'text'"
                                                                                   class="fa fa-file-text-o"
                                                                                   aria-hidden="true"></i>
                                                                                <span t-raw="m.material_id.name"/>
                                                                            </td>
                                                                            <td width="20%">
                                                                              <t t-foreach="m.material_id.material_version_ids"
                                                                                t-as="v"
                                                                                t-if="v.website_published">
                                                                                <a t-attf-href="##{slug(v)}"
                                                                                   data-toggle="modal">
                                                                                    <span class="hidden-xs hidden-sm" t-raw="v.language"/>
                                                                                </a>

                                                                                <!-- Modal HTML -->
                                                                                <div t-attf-id="#{slug(v)}"
                                                                                     class="modal fade in videoToggleOff"
                                                                                     role="dialog"
                                                                                     tabindex="-1">
                                                                                    <div class="modal-dialog modal-lg">
                                                                                        <div class="modal-content">
                                                                                            <div class="modal-header">
                                                                                                <button type="button"
                                                                                                        class="close"
                                                                                                        data-dismiss="modal"
                                                                                                        aria-hidden="true">
                                                                                                    ×
                                                                                                </button>
                                                                                                <h4 class="modal-title">
                                                                                                    <h4 class="modal-title">
                                                                                                        <t t-raw="v.language"/>
                                                                                                    </h4>
                                                                                                </h4>
                                                                                            </div>
                                                                                            <div class="modal-body">
                                                                                                <span class="ifram-width"
                                                                                                      t-raw="v.embed_code"/>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                              </t>
                                                                            </td>
                                                                            <td width="15%">
                                                                                <a t-attf-href="/web/content/op.material/{{ m.material_id.id }}/datas" target="_blank" t-if="m.material_id.material_type != 'text'">
                                                                                  <i class="fa fa-download"
                                                                                       aria-hidden="true"></i>
                                                                                  <span class="hidden-xs hidden-sm">
                                                                                      Download
                                                                                  </span>
                                                                                </a>

                                                                                <a t-attf-href="/course/material/{{ m.material_id.id }}/text_content" target="_blank" t-if="m.material_id.material_type == 'text'">
                                                                                  <i class="fa fa-download"
                                                                                       aria-hidden="true"></i>
                                                                                  <span class="hidden-xs hidden-sm">
                                                                                      Download
                                                                                  </span>
                                                                                </a>
                                                                            </td>
                                                                            <td width="15%">
                                                                                <a t-attf-href="##{slug(m.material_id)}"
                                                                                   data-toggle="modal"
                                                                                   t-if="m.preview and m.material_id.material_type != 'quiz'">
                                                                                    <i class="fa fa-eye"
                                                                                       aria-hidden="true"></i>
                                                                                    <span class="hidden-xs hidden-sm">
                                                                                        Preview
                                                                                    </span>
                                                                                </a>
                                                                            </td>
                                                                            <td class="hidden-xs hidden-sm"
                                                                                width="15%"
                                                                                style="text-align: right; padding-right: 15px;">
                                                                                <span t-raw="m.display_time"/>
                                                                            </td>
                                                                        </tr>
                                                                        <!-- Modal HTML -->
                                                                        <div t-attf-if="#{m.preview}"
                                                                             t-attf-id="#{slug(m.material_id)}"
                                                                             class="modal fade in videoToggleOff"
                                                                             role="dialog"
                                                                             tabindex="-1">
                                                                            <div class="modal-dialog modal-lg">
                                                                                <div class="modal-content">
                                                                                    <div class="modal-header">
                                                                                        <button type="button"
                                                                                                class="close"
                                                                                                data-dismiss="modal"
                                                                                                aria-hidden="true">
                                                                                            ×
                                                                                        </button>
                                                                                        <h4 class="modal-title">
                                                                                            <h4 class="modal-title">
                                                                                                <t t-raw="m.material_id.name"/>
                                                                                            </h4>
                                                                                        </h4>
                                                                                    </div>
                                                                                    <div class="modal-body">
                                                                                        <span class="ifram-width"
                                                                                              t-raw="m.material_id.embed_code"/>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </t>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </t>
                                        </div>
                                    </div>
                                    <div role="tabpanel"
                                         class="tab-pane"
                                         id="course-instructor">
                                        <div class="row">
                                            <t t-foreach="course.faculty_ids"
                                               t-as="faculty">
                                                <div class="col-md-12 course_faculty_ids">
                                                    <div class="col-md-2">
                                                        <img t-att-src="'data:image/png;base64,%s' % (faculty.image)"
                                                             class="img img-responsive img-circle"/>
                                                    </div>
                                                    <div class="col-md-10">
                                                        <h3>
                                                            <span t-raw="faculty.name"/>
                                                        </h3>
                                                        Email :
                                                        <span t-raw="faculty.email"/>
                                                        <br/>
                                                        <br/>
                                                        <span t-raw="faculty.bio_data"/>
                                                    </div>
                                                </div>
                                            </t>
                                        </div>
                                    </div>
                                    <div role="tabpanel"
                                         class="tab-pane"
                                         id="course-comments">
                                        <t t-call="website_mail.message_thread">
                                            <t t-set="object"
                                               t-value="course"/>
                                            <t t-set="chatter_mode"
                                               t-value="'json'"/>
                                            <t t-set="rating_enable"
                                               t-value="True"/>
                                        </t>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </section>
                <section>
                    <div class="container">
                        <div class="row" t-if="course.suggested_course_ids">
                            <div class="mt48 mb16 col-md-12">
                                <h3>Suggested Courses</h3>
                            </div>
                            <div class="owl-carousel owl-theme col-md-12">
                                <t t-foreach="course.suggested_course_ids"
                                   t-as="c">
                                    <div class="item">
                                        <div class="well" style="padding:0px;">
                                            <div class="suggested-img">
                                                <a t-attf-href="/course-detail/#{slug(c)}">
                                                    <img t-if="not c.image"
                                                         t-attf-src="/openeducat_lms/static/src/img/channel-default.jpg"
                                                         class="img img-responsive"/>
                                                    <img t-if="c.image"
                                                         t-attf-src="/web/image/op.course/#{c.id}/image"
                                                         class="img img-responsive"/>
                                                </a>
                                            </div>
                                            <div>
                                                <div class="course-title">
                                                    <h2 class="website_lms_h2">
                                                        <a t-attf-href="/course-detail/#{slug(c)}"
                                                           t-esc="c.name"/>
                                                    </h2>
                                                </div>
                                                <div class="course-instructor">
                                                    Teacher:
                                                    <span style="font-weight: 600;">
                                                        <t t-if="c.faculty_ids"
                                                           t-esc="c.faculty_ids[0].name"/>
                                                    </span>
                                                </div>
                                                <div class="course-price">
                                                    <span t-if="c.type == 'free'">
                                                        Free
                                                    </span>
                                                    <span t-if="c.type == 'paid'">
                                                        <t t-esc="c.price"/>
                                                    </span>
                                                </div>
                                                <div class="course-student">
                                                    <span>
                                                        <i class="fa fa-users"
                                                           aria-hidden="true"></i>
                                                        Students:
                                                        <b>
                                                            <t t-esc="len(course.course_enrollment_ids)"/>
                                                        </b>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </t>
                            </div>
                        </div>

                    </div>
                </section>
            </div>
        </t>
    </template>
</odoo>